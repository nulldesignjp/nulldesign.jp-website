function loadSVG(d,b){var c=d.currentURL;b=b==undefined?function(e){}:b;var a=new THREE.SVGLoader();a.load(c,function(k){var t=k.paths;var q=new THREE.Group();var m=0.1;for(var l=0;l<t.length;l++){var u=t[l];var f=u.userData.style.fill;if(d.drawFillShapes&&f!==undefined&&f!=="none"){var o=new THREE.MeshBasicMaterial({color:16777215,transparent:true,side:THREE.DoubleSide,depthTest:false});var e=u.toShapes(true);for(var g=0;g<e.length;g++){var n=e[g];var p=new THREE.ShapeBufferGeometry(n);p.scale(m,m,m);p.rotateX(Math.PI*0.5);var s=new THREE.Mesh(p,o);q.add(s)}}var r=u.userData.style.stroke;if(d.drawStrokes&&r!==undefined&&r!=="none"){var o=new THREE.MeshBasicMaterial({color:new THREE.Color().setStyle(r),opacity:u.userData.style.strokeOpacity,transparent:u.userData.style.strokeOpacity<1,side:THREE.DoubleSide,depthWrite:false,wireframe:d.strokesWireframe});for(var g=0,h=u.subPaths.length;g<h;g++){subPath=u.subPaths[g];var p=THREE.SVGLoader.pointsToStroke(subPath.getPoints(),u.userData.style);if(p){var s=new THREE.Mesh(p,o);q.add(s)}}}}b(q)})}THREE.SVGLoader=function(a){this.manager=(a!==undefined)?a:THREE.DefaultLoadingManager};THREE.SVGLoader.prototype={constructor:THREE.SVGLoader,load:function(b,d,f,e){var c=this;var a=new THREE.FileLoader(c.manager);a.setPath(c.path);a.load(b,function(g){d(c.parse(g))},f,e)},setPath:function(a){this.path=a;return this},parse:function(q){function A(M,L){if(M.nodeType!==1){return}var J=g(M);var N=null;switch(M.nodeName){case"svg":break;case"g":L=D(M,L);break;case"path":L=D(M,L);if(M.hasAttribute("d")){N=t(M,L)}break;case"rect":L=D(M,L);N=b(M,L);break;case"polygon":L=D(M,L);N=d(M,L);break;case"polyline":L=D(M,L);N=n(M,L);break;case"circle":L=D(M,L);N=a(M,L);break;case"ellipse":L=D(M,L);N=z(M,L);break;case"line":L=D(M,L);N=m(M,L);break;default:console.log(M)}if(N){if(L.fill!==undefined&&L.fill!=="none"){N.color.setStyle(L.fill)}r(N,o);x.push(N);N.userData={node:M,style:L}}var I=M.childNodes;for(var K=0;K<I.length;K++){A(I[K],L)}if(J){l.pop();if(l.length>0){o.copy(l[l.length-1])}else{o.identity()}}}function t(T,Z){var S=new THREE.ShapePath();var U=new THREE.Vector2();var Q=new THREE.Vector2();var R=new THREE.Vector2();var ab=true;var K=false;var aa=T.getAttribute("d");var O=aa.match(/[a-df-z][^a-df-z]*/ig);for(var X=0,V=O.length;X<V;X++){var J=O[X];var I=J.charAt(0);var ac=J.substr(1).trim();if(ab===true){K=true;ab=false}switch(I){case"M":var P=y(ac);for(var W=0,Y=P.length;W<Y;W+=2){U.x=P[W+0];U.y=P[W+1];Q.x=U.x;Q.y=U.y;if(W===0){S.moveTo(U.x,U.y)}else{S.lineTo(U.x,U.y)}if(W===0&&K===true){R.copy(U)}}break;case"H":var P=y(ac);for(var W=0,Y=P.length;W<Y;W++){U.x=P[W];Q.x=U.x;Q.y=U.y;S.lineTo(U.x,U.y);if(W===0&&K===true){R.copy(U)}}break;case"V":var P=y(ac);for(var W=0,Y=P.length;W<Y;W++){U.y=P[W];Q.x=U.x;Q.y=U.y;S.lineTo(U.x,U.y);if(W===0&&K===true){R.copy(U)}}break;case"L":var P=y(ac);for(var W=0,Y=P.length;W<Y;W+=2){U.x=P[W+0];U.y=P[W+1];Q.x=U.x;Q.y=U.y;S.lineTo(U.x,U.y);if(W===0&&K===true){R.copy(U)}}break;case"C":var P=y(ac);for(var W=0,Y=P.length;W<Y;W+=6){S.bezierCurveTo(P[W+0],P[W+1],P[W+2],P[W+3],P[W+4],P[W+5]);Q.x=P[W+2];Q.y=P[W+3];U.x=P[W+4];U.y=P[W+5];if(W===0&&K===true){R.copy(U)}}break;case"S":var P=y(ac);for(var W=0,Y=P.length;W<Y;W+=4){S.bezierCurveTo(e(U.x,Q.x),e(U.y,Q.y),P[W+0],P[W+1],P[W+2],P[W+3]);Q.x=P[W+0];Q.y=P[W+1];U.x=P[W+2];U.y=P[W+3];if(W===0&&K===true){R.copy(U)}}break;case"Q":var P=y(ac);for(var W=0,Y=P.length;W<Y;W+=4){S.quadraticCurveTo(P[W+0],P[W+1],P[W+2],P[W+3]);Q.x=P[W+0];Q.y=P[W+1];U.x=P[W+2];U.y=P[W+3];if(W===0&&K===true){R.copy(U)}}break;case"T":var P=y(ac);for(var W=0,Y=P.length;W<Y;W+=2){var N=e(U.x,Q.x);var M=e(U.y,Q.y);S.quadraticCurveTo(N,M,P[W+0],P[W+1]);Q.x=N;Q.y=M;U.x=P[W+0];U.y=P[W+1];if(W===0&&K===true){R.copy(U)}}break;case"A":var P=y(ac);for(var W=0,Y=P.length;W<Y;W+=7){var L=U.clone();U.x=P[W+5];U.y=P[W+6];Q.x=U.x;Q.y=U.y;h(S,P[W],P[W+1],P[W+2],P[W+3],P[W+4],L,U);if(W===0&&K===true){R.copy(U)}}break;case"m":var P=y(ac);for(var W=0,Y=P.length;W<Y;W+=2){U.x+=P[W+0];U.y+=P[W+1];Q.x=U.x;Q.y=U.y;if(W===0){S.moveTo(U.x,U.y)}else{S.lineTo(U.x,U.y)}if(W===0&&K===true){R.copy(U)}}break;case"h":var P=y(ac);for(var W=0,Y=P.length;W<Y;W++){U.x+=P[W];Q.x=U.x;Q.y=U.y;S.lineTo(U.x,U.y);if(W===0&&K===true){R.copy(U)}}break;case"v":var P=y(ac);for(var W=0,Y=P.length;W<Y;W++){U.y+=P[W];Q.x=U.x;Q.y=U.y;S.lineTo(U.x,U.y);if(W===0&&K===true){R.copy(U)}}break;case"l":var P=y(ac);for(var W=0,Y=P.length;W<Y;W+=2){U.x+=P[W+0];U.y+=P[W+1];Q.x=U.x;Q.y=U.y;S.lineTo(U.x,U.y);if(W===0&&K===true){R.copy(U)}}break;case"c":var P=y(ac);for(var W=0,Y=P.length;W<Y;W+=6){S.bezierCurveTo(U.x+P[W+0],U.y+P[W+1],U.x+P[W+2],U.y+P[W+3],U.x+P[W+4],U.y+P[W+5]);Q.x=U.x+P[W+2];Q.y=U.y+P[W+3];U.x+=P[W+4];U.y+=P[W+5];if(W===0&&K===true){R.copy(U)}}break;case"s":var P=y(ac);for(var W=0,Y=P.length;W<Y;W+=4){S.bezierCurveTo(e(U.x,Q.x),e(U.y,Q.y),U.x+P[W+0],U.y+P[W+1],U.x+P[W+2],U.y+P[W+3]);Q.x=U.x+P[W+0];Q.y=U.y+P[W+1];U.x+=P[W+2];U.y+=P[W+3];if(W===0&&K===true){R.copy(U)}}break;case"q":var P=y(ac);for(var W=0,Y=P.length;W<Y;W+=4){S.quadraticCurveTo(U.x+P[W+0],U.y+P[W+1],U.x+P[W+2],U.y+P[W+3]);Q.x=U.x+P[W+0];Q.y=U.y+P[W+1];U.x+=P[W+2];U.y+=P[W+3];if(W===0&&K===true){R.copy(U)}}break;case"t":var P=y(ac);for(var W=0,Y=P.length;W<Y;W+=2){var N=e(U.x,Q.x);var M=e(U.y,Q.y);S.quadraticCurveTo(N,M,U.x+P[W+0],U.y+P[W+1]);Q.x=N;Q.y=M;U.x=U.x+P[W+0];U.y=U.y+P[W+1];if(W===0&&K===true){R.copy(U)}}break;case"a":var P=y(ac);for(var W=0,Y=P.length;W<Y;W+=7){var L=U.clone();U.x+=P[W+5];U.y+=P[W+6];Q.x=U.x;Q.y=U.y;h(S,P[W],P[W+1],P[W+2],P[W+3],P[W+4],L,U);if(W===0&&K===true){R.copy(U)}}break;case"Z":case"z":S.currentPath.autoClose=true;if(S.currentPath.curves.length>0){U.copy(R);S.currentPath.currentPoint.copy(U);ab=true}break;default:console.warn(J)}K=false}return S}function h(aa,Q,P,X,T,ah,O,L){X=X*Math.PI/180;Q=Math.abs(Q);P=Math.abs(P);var I=(O.x-L.x)/2;var U=(O.y-L.y)/2;var ad=Math.cos(X)*I+Math.sin(X)*U;var N=-Math.sin(X)*I+Math.cos(X)*U;var V=Q*Q;var af=P*P;var ac=ad*ad;var ag=N*N;var R=ac/V+ag/af;if(R>1){var W=Math.sqrt(R);Q=W*Q;P=W*P;V=Q*Q;af=P*P}var ab=(V*ag+af*ac);var ae=(V*af-ab)/ab;var Z=Math.sqrt(Math.max(0,ae));if(T===ah){Z=-Z}var M=Z*Q*N/P;var Y=-Z*P*ad/Q;var K=Math.cos(X)*M-Math.sin(X)*Y+(O.x+L.x)/2;var J=Math.sin(X)*M+Math.cos(X)*Y+(O.y+L.y)/2;var S=H(1,0,(ad-M)/Q,(N-Y)/P);var ai=H((ad-M)/Q,(N-Y)/P,(-ad-M)/Q,(-N-Y)/P)%(Math.PI*2);aa.currentPath.absellipse(K,J,Q,P,S,S+ai,ah===0,X)}function H(M,K,O,N){var J=M*O+K*N;var I=Math.sqrt(M*M+K*K)*Math.sqrt(O*O+N*N);var L=Math.acos(Math.max(-1,Math.min(1,J/I)));if((M*N-K*O)<0){L=-L}return L}function b(L,J){var O=parseFloat(L.getAttribute("x")||0);var N=parseFloat(L.getAttribute("y")||0);var K=parseFloat(L.getAttribute("rx")||0);var I=parseFloat(L.getAttribute("ry")||0);var P=parseFloat(L.getAttribute("width"));var M=parseFloat(L.getAttribute("height"));var Q=new THREE.ShapePath();Q.moveTo(O+2*K,N);Q.lineTo(O+P-2*K,N);if(K!==0||I!==0){Q.bezierCurveTo(O+P,N,O+P,N,O+P,N+2*I)}Q.lineTo(O+P,N+M-2*I);if(K!==0||I!==0){Q.bezierCurveTo(O+P,N+M,O+P,N+M,O+P-2*K,N+M)}Q.lineTo(O+2*K,N+M);if(K!==0||I!==0){Q.bezierCurveTo(O,N+M,O,N+M,O,N+M-2*I)}Q.lineTo(O,N+2*I);if(K!==0||I!==0){Q.bezierCurveTo(O,N,O,N,O+2*K,N)}return Q}function d(M,K){function J(R,Q,P){var O=parseFloat(Q);var S=parseFloat(P);if(I===0){N.moveTo(O,S)}else{N.lineTo(O,S)}I++}var L=/(-?[\d\.?]+)[,|\s](-?[\d\.?]+)/g;var N=new THREE.ShapePath();var I=0;M.getAttribute("points").replace(L,J);N.currentPath.autoClose=true;return N}function n(M,K){function J(R,Q,P){var O=parseFloat(Q);var S=parseFloat(P);if(I===0){N.moveTo(O,S)}else{N.lineTo(O,S)}I++}var L=/(-?[\d\.?]+)[,|\s](-?[\d\.?]+)/g;var N=new THREE.ShapePath();var I=0;M.getAttribute("points").replace(L,J);N.currentPath.autoClose=false;return N}function a(M,K){var I=parseFloat(M.getAttribute("cx"));var O=parseFloat(M.getAttribute("cy"));var L=parseFloat(M.getAttribute("r"));var J=new THREE.Path();J.absarc(I,O,L,0,Math.PI*2);var N=new THREE.ShapePath();N.subPaths.push(J);return N}function z(L,K){var I=parseFloat(L.getAttribute("cx"));var P=parseFloat(L.getAttribute("cy"));var O=parseFloat(L.getAttribute("rx"));var M=parseFloat(L.getAttribute("ry"));var J=new THREE.Path();J.absellipse(I,P,O,M,0,Math.PI*2);var N=new THREE.ShapePath();N.subPaths.push(J);return N}function m(N,M){var J=parseFloat(N.getAttribute("x1"));var L=parseFloat(N.getAttribute("y1"));var I=parseFloat(N.getAttribute("x2"));var K=parseFloat(N.getAttribute("y2"));var O=new THREE.ShapePath();O.moveTo(J,L);O.lineTo(I,K);O.currentPath.autoClose=false;return O}function D(L,K){K=Object.assign({},K);function J(O,N,P){if(P===undefined){P=function Q(R){return R}}if(L.hasAttribute(O)){K[N]=P(L.getAttribute(O))}if(L.style[O]!==""){K[N]=P(L.style[O])}}function M(N){return Math.max(0,Math.min(1,N))}function I(N){return Math.max(0,N)}J("fill","fill");J("fill-opacity","fillOpacity",M);J("stroke","stroke");J("stroke-opacity","strokeOpacity",M);J("stroke-width","strokeWidth",I);J("stroke-linejoin","strokeLineJoin");J("stroke-linecap","strokeLineCap");J("stroke-miterlimit","strokeMiterLimit",I);return K}function e(J,I){return J-(I-J)}function y(I){var N=I.split(/[\s,]+|(?=\s?[+\-])/);for(var K=0;K<N.length;K++){var M=N[K];if(M.indexOf(".")!==M.lastIndexOf(".")){var J=M.split(".");for(var L=2;L<J.length;L++){N.splice(K+L-1,0,"0."+J[L])}}N[K]=parseFloat(M)}return N}function g(J){if(!J.hasAttribute("transform")){return null}var I=k(J);if(I){if(l.length>0){I.premultiply(l[l.length-1])}o.copy(I);l.push(I)}return I}function k(J){var I=new THREE.Matrix3();var Y=w;var X=J.getAttribute("transform").split(")");for(var W=X.length-1;W>=0;W--){var Q=X[W].trim();if(Q===""){continue}var T=Q.indexOf("(");var V=Q.length;if(T>0&&T<V){var N=Q.substr(0,T);var R=y(Q.substr(T+1,V-T-1));Y.identity();switch(N){case"translate":if(R.length>=1){var P=R[0];var O=P;if(R.length>=2){O=R[1]}Y.translate(P,O)}break;case"rotate":if(R.length>=1){var L=0;var M=0;var K=0;L=-R[0]*Math.PI/180;if(R.length>=3){M=R[1];K=R[2]}v.identity().translate(-M,-K);u.identity().rotate(L);s.multiplyMatrices(u,v);v.identity().translate(M,K);Y.multiplyMatrices(v,s)}break;case"scale":if(R.length>=1){var U=R[0];var S=U;if(R.length>=2){S=R[1]}Y.scale(U,S)}break;case"skewX":if(R.length===1){Y.set(1,Math.tan(R[0]*Math.PI/180),0,0,1,0,0,0,1)}break;case"skewY":if(R.length===1){Y.set(1,0,0,Math.tan(R[0]*Math.PI/180),1,0,0,0,1)}break;case"matrix":if(R.length===6){Y.set(R[0],R[2],R[4],R[1],R[3],R[5],0,0,1)}break}}I.premultiply(Y)}return I}function r(S,L){function O(T){E.set(T.x,T.y,1).applyMatrix3(L);T.set(E.x,E.y)}var P=p(L);var Q=S.subPaths;for(var N=0,J=Q.length;N<J;N++){var K=Q[N];var R=K.curves;for(var M=0;M<R.length;M++){var I=R[M];if(I.isLineCurve){O(I.v1);O(I.v2)}else{if(I.isCubicBezierCurve){O(I.v0);O(I.v1);O(I.v2);O(I.v3)}else{if(I.isQuadraticBezierCurve){O(I.v0);O(I.v1);O(I.v2)}else{if(I.isEllipseCurve){if(P){console.warn("SVGLoader: Elliptic arc or ellipse rotation or skewing is not implemented.")}G.set(I.aX,I.aY);O(G);I.aX=G.x;I.aY=G.y;I.xRadius*=C(L);I.yRadius*=B(L)}}}}}}}function p(I){return I.elements[1]!==0||I.elements[3]!==0}function C(I){var J=I.elements;return Math.sqrt(J[0]*J[0]+J[1]*J[1])}function B(I){var J=I.elements;return Math.sqrt(J[3]*J[3]+J[4]*J[4])}var x=[];var l=[];var w=new THREE.Matrix3();var v=new THREE.Matrix3();var u=new THREE.Matrix3();var s=new THREE.Matrix3();var G=new THREE.Vector2();var E=new THREE.Vector3();var o=new THREE.Matrix3();var c=this;console.time("THREE.SVGLoader: DOMParser");var f=new DOMParser().parseFromString(q,"image/svg+xml");console.timeEnd("THREE.SVGLoader: DOMParser");console.time("THREE.SVGLoader: Parse");A(f.documentElement,{fill:"#000",fillOpacity:1,strokeOpacity:1,strokeWidth:1,strokeLineJoin:"miter",strokeLineCap:"butt",strokeMiterLimit:4});var F={paths:x,xml:f.documentElement};console.timeEnd("THREE.SVGLoader: Parse");return F}};THREE.SVGLoader.getStrokeStyle=function(e,c,d,a,f,b){e=e!==undefined?e:1;c=c!==undefined?c:"#000";d=d!==undefined?d:1;a=a!==undefined?a:"miter";f=f!==undefined?f:"butt";b=b!==undefined?b:4;return{strokeColor:c,strokeWidth:e,strokeLineJoin:a,strokeLineCap:f,strokeMiterLimit:b}};THREE.SVGLoader.pointsToStroke=function(e,d,c,h){var a=[];var f=[];var b=[];if(THREE.SVGLoader.pointsToStrokeWithBuffers(e,d,c,h,a,f,b)===0){return null}var g=new THREE.BufferGeometry();g.addAttribute("position",new THREE.Float32BufferAttribute(a,3));g.addAttribute("normal",new THREE.Float32BufferAttribute(f,3));g.addAttribute("uv",new THREE.Float32BufferAttribute(b,2));return g};THREE.SVGLoader.pointsToStrokeWithBuffers=function(){var s=new THREE.Vector2();var q=new THREE.Vector2();var o=new THREE.Vector2();var m=new THREE.Vector2();var k=new THREE.Vector2();var h=new THREE.Vector2();var g=new THREE.Vector2();var c=new THREE.Vector3();var v=new THREE.Vector2();var t=new THREE.Vector2();var e=new THREE.Vector2();var d=new THREE.Vector2();var r=new THREE.Vector2();var f=new THREE.Vector2();var a=new THREE.Vector2();var w=new THREE.Vector2();var u=new THREE.Vector2();var b=new THREE.Vector2();var p=new THREE.Matrix3();var n=new THREE.Matrix3();var l=new THREE.Matrix3();return function(ad,ag,aj,F,z,R,ae,G){arcLengthDivisions=aj!==undefined?aj:12;F=F!==undefined?F:0.001;G=G!==undefined?G:0;ad=I(ad);var U=ad.length;if(U<2){return 0}var af=ad[0].equals(ad[U-1]);var D;var am=ad[0];var O;var W=ag.strokeWidth/2;var N=1/(U-1);var L=0;var Z;var ab;var y;var ai=false;var M=0;var E=G*3;var ah=G*2;P(ad[0],ad[1],s).multiplyScalar(W);v.copy(ad[0]).sub(s);t.copy(ad[0]).add(s);e.copy(v);d.copy(t);for(var aa=1;aa<U;aa++){D=ad[aa];if(aa===U-1){if(af){O=ad[1]}else{O=undefined}}else{O=ad[aa+1]}var C=s;P(am,D,C);o.copy(C).multiplyScalar(W);r.copy(D).sub(o);f.copy(D).add(o);var K=L+N;Z=false;if(O!==undefined){P(D,O,q);o.copy(q).multiplyScalar(W);a.copy(D).sub(o);w.copy(D).add(o);ab=true;o.subVectors(O,am);if(C.dot(o)<0){ab=false}if(aa===1){ai=ab}o.subVectors(O,D);var V=o.normalize();var al=Math.abs(C.dot(o));if(al!==0){var A=W/al;o.multiplyScalar(-A);m.subVectors(D,am);k.copy(m).setLength(A).add(o);u.copy(k).negate();var H=k.length();var S=m.length();m.divideScalar(S);h.subVectors(O,D);var ak=h.length();h.divideScalar(ak);if(m.dot(u)<S&&h.dot(u)<ak){Z=true}b.copy(k).add(D);u.add(D);y=false;if(Z){if(ab){w.copy(u);f.copy(u)}else{a.copy(u);r.copy(u)}}else{T()}switch(ag.strokeLineJoin){case"bevel":Q(ab,Z,K);break;case"round":Y(ab,Z);if(ab){B(D,r,a,K,0)}else{B(D,w,f,K,1)}break;case"miter":case"miter-clip":default:var an=(W*ag.strokeMiterLimit)/H;if(an<1){if(ag.strokeLineJoin!=="miter-clip"){Q(ab,Z,K);break}else{Y(ab,Z);if(ab){h.subVectors(b,r).multiplyScalar(an).add(r);g.subVectors(b,a).multiplyScalar(an).add(a);J(r,K,0);J(h,K,0);J(D,K,0.5);J(D,K,0.5);J(h,K,0);J(g,K,0);J(D,K,0.5);J(g,K,0);J(a,K,0)}else{h.subVectors(b,f).multiplyScalar(an).add(f);g.subVectors(b,w).multiplyScalar(an).add(w);J(f,K,1);J(h,K,1);J(D,K,0.5);J(D,K,0.5);J(h,K,1);J(g,K,1);J(D,K,0.5);J(g,K,1);J(w,K,1)}}}else{if(Z){if(ab){J(t,L,1);J(v,L,0);J(b,K,0);J(t,L,1);J(b,K,0);J(u,K,1)}else{J(t,L,1);J(v,L,0);J(b,K,1);J(v,L,0);J(u,K,0);J(b,K,1)}if(ab){a.copy(b)}else{w.copy(b)}}else{if(ab){J(r,K,0);J(b,K,0);J(D,K,0.5);J(D,K,0.5);J(b,K,0);J(a,K,0)}else{J(f,K,1);J(b,K,1);J(D,K,0.5);J(D,K,0.5);J(b,K,1);J(w,K,1)}}y=true}break}}else{T()}}else{T()}if(!af&&aa===U-1){ac(ad[0],e,d,ab,true,L)}L=K;am=D;v.copy(a);t.copy(w)}if(!af){ac(D,r,f,ab,false,K)}else{if(Z&&z){var X=b;var x=u;if(ai!==ab){X=u;x=b}if(ab){x.toArray(z,0*3);x.toArray(z,3*3);if(y){X.toArray(z,1*3)}}else{x.toArray(z,1*3);x.toArray(z,3*3);if(y){X.toArray(z,0*3)}}}}return M;function P(aq,ap,ao){ao.subVectors(ap,aq);return ao.set(-ao.y,ao.x).normalize()}function J(ao,aq,ap){if(z){z[E]=ao.x;z[E+1]=ao.y;z[E+2]=0;if(R){R[E]=0;R[E+1]=0;R[E+2]=1}E+=3;if(ae){ae[ah]=aq;ae[ah+1]=ap;ah+=2}}M+=3}function B(ao,aw,au,ax,av){s.copy(aw).sub(ao).normalize();q.copy(au).sub(ao).normalize();var aq=Math.PI;var ap=s.dot(q);if(Math.abs(ap)<1){aq=Math.abs(Math.acos(ap))}aq/=arcLengthDivisions;o.copy(aw);for(var ar=0,at=arcLengthDivisions-1;ar<at;ar++){m.copy(o).rotateAround(ao,aq);J(o,ax,av);J(m,ax,av);J(ao,ax,0.5);o.copy(m)}J(m,ax,av);J(au,ax,av);J(ao,ax,0.5)}function T(){J(t,L,1);J(v,L,0);J(r,K,0);J(t,L,1);J(r,K,1);J(f,K,0)}function Q(ao,aq,ap){if(aq){if(ao){J(t,L,1);J(v,L,0);J(r,K,0);J(t,L,1);J(r,K,0);J(u,K,1);J(r,ap,0);J(a,ap,0);J(u,ap,0.5)}else{J(t,L,1);J(v,L,0);J(f,K,1);J(v,L,0);J(u,K,0);J(f,K,1);J(f,ap,1);J(w,ap,0);J(u,ap,0.5)}}else{if(ao){J(r,ap,0);J(a,ap,0);J(D,ap,0.5)}else{J(f,ap,1);J(w,ap,0);J(D,ap,0.5)}}}function Y(ao,ap){if(ap){if(ao){J(t,L,1);J(v,L,0);J(r,K,0);J(t,L,1);J(r,K,0);J(u,K,1);J(r,L,0);J(D,K,0.5);J(u,K,1);J(D,K,0.5);J(a,L,0);J(u,K,1)}else{J(t,L,1);J(v,L,0);J(f,K,1);J(v,L,0);J(u,K,0);J(f,K,1);J(f,L,1);J(u,K,0);J(D,K,0.5);J(D,K,0.5);J(u,K,0);J(w,L,1)}}}function ac(ao,au,at,ap,av,aq){switch(ag.strokeLineCap){case"round":if(av){B(ao,at,au,aq,0.5)}else{B(ao,au,at,aq,0.5)}break;case"square":if(av){s.subVectors(au,ao);q.set(s.y,-s.x);o.addVectors(s,q).add(ao);m.subVectors(q,s).add(ao);if(ap){o.toArray(z,1*3);m.toArray(z,0*3);m.toArray(z,3*3)}else{o.toArray(z,1*3);o.toArray(z,3*3);m.toArray(z,0*3)}}else{s.subVectors(at,ao);q.set(s.y,-s.x);o.addVectors(s,q).add(ao);m.subVectors(q,s).add(ao);var ar=z.length;if(ap){o.toArray(z,ar-1*3);m.toArray(z,ar-2*3);m.toArray(z,ar-4*3)}else{o.toArray(z,ar-2*3);m.toArray(z,ar-1*3);m.toArray(z,ar-4*3)}}break;case"butt":default:break}}function I(ap){var at=false;for(var ao=1,ar=ap.length-1;ao<ar;ao++){if(ap[ao].distanceTo(ap[ao+1])<F){at=true;break}}if(!at){return ap}var aq=[];aq.push(ap[0]);for(var ao=1,ar=ap.length-1;ao<ar;ao++){if(ap[ao].distanceTo(ap[ao+1])>=F){aq.push(ap[ao])}}aq.push(ap[ap.length-1]);return aq}}}();THREE.OrbitControls=function(E,F){this.object=E;this.domElement=(F!==undefined)?F:document;this.enabled=true;this.target=new THREE.Vector3();this.center=this.target;this.noZoom=false;this.zoomSpeed=1;this.minDistance=0;this.maxDistance=Infinity;this.minZoom=0;this.maxZoom=Infinity;this.noRotate=false;this.rotateSpeed=1;this.noPan=false;this.keyPanSpeed=7;this.autoRotate=false;this.autoRotateSpeed=2;this.minPolarAngle=0;this.maxPolarAngle=Math.PI;this.minAzimuthAngle=-Infinity;this.maxAzimuthAngle=Infinity;this.noKeys=false;this.keys={LEFT:37,UP:38,RIGHT:39,BOTTOM:40};this.mouseButtons={ORBIT:THREE.MOUSE.LEFT,ZOOM:THREE.MOUSE.MIDDLE,PAN:THREE.MOUSE.RIGHT};var B=this;var c=0.000001;var u=new THREE.Vector2();var q=new THREE.Vector2();var C=new THREE.Vector2();var d=new THREE.Vector2();var r=new THREE.Vector2();var m=new THREE.Vector2();var I=new THREE.Vector3();var D=new THREE.Vector3();var t=new THREE.Vector2();var b=new THREE.Vector2();var A=new THREE.Vector2();var p;var O;var z=0;var h=0;var w=1;var l=new THREE.Vector3();var e=new THREE.Vector3();var s=new THREE.Quaternion();var f={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_DOLLY:4,TOUCH_PAN:5};var P=f.NONE;this.target0=this.target.clone();this.position0=this.object.position.clone();this.zoom0=this.object.zoom;var N=new THREE.Quaternion().setFromUnitVectors(E.up,new THREE.Vector3(0,1,0));var o=N.clone().inverse();var K={type:"change"};var H={type:"start"};var v={type:"end"};this.rotateLeft=function(Q){if(Q===undefined){Q=g()}h-=Q};this.rotateUp=function(Q){if(Q===undefined){Q=g()}z-=Q};this.panLeft=function(R){var Q=this.object.matrix.elements;I.set(Q[0],Q[1],Q[2]);I.multiplyScalar(-R);l.add(I)};this.panUp=function(R){var Q=this.object.matrix.elements;I.set(Q[4],Q[5],Q[6]);I.multiplyScalar(R);l.add(I)};this.pan=function(S,R){var T=B.domElement===document?B.domElement.body:B.domElement;if(B.object instanceof THREE.PerspectiveCamera){var Q=B.object.position;var V=Q.clone().sub(B.target);var U=V.length();U*=Math.tan((B.object.fov/2)*Math.PI/180);B.panLeft(2*S*U/T.clientHeight);B.panUp(2*R*U/T.clientHeight)}else{if(B.object instanceof THREE.OrthographicCamera){B.panLeft(S*(B.object.right-B.object.left)/T.clientWidth);B.panUp(R*(B.object.top-B.object.bottom)/T.clientHeight)}else{console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled.")}}};this.dollyIn=function(Q){if(Q===undefined){Q=x()}if(B.object instanceof THREE.PerspectiveCamera){w/=Q}else{if(B.object instanceof THREE.OrthographicCamera){B.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom*Q));B.object.updateProjectionMatrix();B.dispatchEvent(K)}else{console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.")}}};this.dollyOut=function(Q){if(Q===undefined){Q=x()}if(B.object instanceof THREE.PerspectiveCamera){w*=Q}else{if(B.object instanceof THREE.OrthographicCamera){B.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom/Q));B.object.updateProjectionMatrix();B.dispatchEvent(K)}else{console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.")}}};this.update=function(){var R=this.object.position;D.copy(R).sub(this.target);D.applyQuaternion(N);p=Math.atan2(D.x,D.z);O=Math.atan2(Math.sqrt(D.x*D.x+D.z*D.z),D.y);if(this.autoRotate&&P===f.NONE){this.rotateLeft(g())}p+=h;O+=z;p=Math.max(this.minAzimuthAngle,Math.min(this.maxAzimuthAngle,p));O=Math.max(this.minPolarAngle,Math.min(this.maxPolarAngle,O));O=Math.max(c,Math.min(Math.PI-c,O));var Q=D.length()*w;Q=Math.max(this.minDistance,Math.min(this.maxDistance,Q));this.target.add(l);D.x=Q*Math.sin(O)*Math.sin(p);D.y=Q*Math.cos(O);D.z=Q*Math.sin(O)*Math.cos(p);D.applyQuaternion(o);R.copy(this.target).add(D);this.object.lookAt(this.target);h=0;z=0;w=1;l.set(0,0,0);if(e.distanceToSquared(this.object.position)>c||8*(1-s.dot(this.object.quaternion))>c){this.dispatchEvent(K);e.copy(this.object.position);s.copy(this.object.quaternion)}};this.reset=function(){P=f.NONE;this.target.copy(this.target0);this.object.position.copy(this.position0);this.object.zoom=this.zoom0;this.object.updateProjectionMatrix();this.dispatchEvent(K);this.update()};this.getPolarAngle=function(){return O};this.getAzimuthalAngle=function(){return p};function g(){return 2*Math.PI/60/60*B.autoRotateSpeed}function x(){return Math.pow(0.95,B.zoomSpeed)}function J(Q){if(B.enabled===false){return}Q.preventDefault();if(Q.button===B.mouseButtons.ORBIT){if(B.noRotate===true){return}P=f.ROTATE;u.set(Q.clientX,Q.clientY)}else{if(Q.button===B.mouseButtons.ZOOM){if(B.noZoom===true){return}P=f.DOLLY;t.set(Q.clientX,Q.clientY)}else{if(Q.button===B.mouseButtons.PAN){if(B.noPan===true){return}P=f.PAN;d.set(Q.clientX,Q.clientY)}}}if(P!==f.NONE){document.addEventListener("mousemove",a,false);document.addEventListener("mouseup",M,false);B.dispatchEvent(H)}}function a(R){if(B.enabled===false){return}R.preventDefault();var Q=B.domElement===document?B.domElement.body:B.domElement;if(P===f.ROTATE){if(B.noRotate===true){return}q.set(R.clientX,R.clientY);C.subVectors(q,u);B.rotateLeft(2*Math.PI*C.x/Q.clientWidth*B.rotateSpeed);B.rotateUp(2*Math.PI*C.y/Q.clientHeight*B.rotateSpeed);u.copy(q)}else{if(P===f.DOLLY){if(B.noZoom===true){return}b.set(R.clientX,R.clientY);A.subVectors(b,t);if(A.y>0){B.dollyIn()}else{if(A.y<0){B.dollyOut()}}t.copy(b)}else{if(P===f.PAN){if(B.noPan===true){return}r.set(R.clientX,R.clientY);m.subVectors(r,d);B.pan(m.x,m.y);d.copy(r)}}}if(P!==f.NONE){B.update()}}function M(){if(B.enabled===false){return}document.removeEventListener("mousemove",a,false);document.removeEventListener("mouseup",M,false);B.dispatchEvent(v);P=f.NONE}function G(Q){if(B.enabled===false||B.noZoom===true||P!==f.NONE){return}Q.preventDefault();Q.stopPropagation();var R=0;if(Q.wheelDelta!==undefined){R=Q.wheelDelta}else{if(Q.detail!==undefined){R=-Q.detail}}if(R>0){B.dollyOut()}else{if(R<0){B.dollyIn()}}B.update();B.dispatchEvent(H);B.dispatchEvent(v)}function k(Q){if(B.enabled===false||B.noKeys===true||B.noPan===true){return}switch(Q.keyCode){case B.keys.UP:B.pan(0,B.keyPanSpeed);B.update();break;case B.keys.BOTTOM:B.pan(0,-B.keyPanSpeed);B.update();break;case B.keys.LEFT:B.pan(B.keyPanSpeed,0);B.update();break;case B.keys.RIGHT:B.pan(-B.keyPanSpeed,0);B.update();break}}function L(S){if(B.enabled===false){return}switch(S.touches.length){case 1:if(B.noRotate===true){return}P=f.TOUCH_ROTATE;u.set(S.touches[0].pageX,S.touches[0].pageY);break;case 2:if(B.noZoom===true){return}P=f.TOUCH_DOLLY;var R=S.touches[0].pageX-S.touches[1].pageX;var Q=S.touches[0].pageY-S.touches[1].pageY;var T=Math.sqrt(R*R+Q*Q);t.set(0,T);break;case 3:if(B.noPan===true){return}P=f.TOUCH_PAN;d.set(S.touches[0].pageX,S.touches[0].pageY);break;default:P=f.NONE}if(P!==f.NONE){B.dispatchEvent(H)}}function n(T){if(B.enabled===false){return}T.preventDefault();T.stopPropagation();var S=B.domElement===document?B.domElement.body:B.domElement;switch(T.touches.length){case 1:if(B.noRotate===true){return}if(P!==f.TOUCH_ROTATE){return}q.set(T.touches[0].pageX,T.touches[0].pageY);C.subVectors(q,u);B.rotateLeft(2*Math.PI*C.x/S.clientWidth*B.rotateSpeed);B.rotateUp(2*Math.PI*C.y/S.clientHeight*B.rotateSpeed);u.copy(q);B.update();break;case 2:if(B.noZoom===true){return}if(P!==f.TOUCH_DOLLY){return}var R=T.touches[0].pageX-T.touches[1].pageX;var Q=T.touches[0].pageY-T.touches[1].pageY;var U=Math.sqrt(R*R+Q*Q);b.set(0,U);A.subVectors(b,t);if(A.y>0){B.dollyOut()}else{if(A.y<0){B.dollyIn()}}t.copy(b);B.update();break;case 3:if(B.noPan===true){return}if(P!==f.TOUCH_PAN){return}r.set(T.touches[0].pageX,T.touches[0].pageY);m.subVectors(r,d);B.pan(m.x,m.y);d.copy(r);B.update();break;default:P=f.NONE}}function y(){if(B.enabled===false){return}B.dispatchEvent(v);P=f.NONE}this.domElement.addEventListener("contextmenu",function(Q){Q.preventDefault()},false);this.domElement.addEventListener("mousedown",J,false);this.domElement.addEventListener("mousewheel",G,false);this.domElement.addEventListener("DOMMouseScroll",G,false);this.domElement.addEventListener("touchstart",L,false);this.domElement.addEventListener("touchend",y,false);this.domElement.addEventListener("touchmove",n,false);window.addEventListener("keydown",k,false);this.update()};THREE.OrbitControls.prototype=Object.create(THREE.EventDispatcher.prototype);THREE.OrbitControls.prototype.constructor=THREE.OrbitControls;function SplineCurve3D(v,m){var n=v.length;var w=[];var H=[];var G=[];var E=[];for(i=0;i<n-1;i++){var e=v[i];var c=v[i+1];w[i]=Math.sqrt((e.x-c.x)*(e.x-c.x)+(e.y-c.y)*(e.y-c.y)+(e.z-c.z)*(e.z-c.z))}H[0]=[0,1,0.5];G[0]={x:(3/(2*w[0]))*(v[1].x-v[0].x),y:(3/(2*w[0]))*(v[1].y-v[0].y),z:(3/(2*w[0]))*(v[1].z-v[0].z)};H[n-1]=[1,2,0];G[n-1]={x:(3/w[n-2])*(v[n-1].x-v[n-2].x),y:(3/w[n-2])*(v[n-1].y-v[n-2].y),z:(3/w[n-2])*(v[n-1].z-v[n-2].z)};for(i=1;i<n-1;i++){var F=w[i-1];var D=w[i];H[i]=[D,2*(D+F),F];G[i]={x:(3*(F*F*(v[i+1].x-v[i].x))+3*D*D*(v[i].x-v[i-1].x))/(D*F),y:(3*(F*F*(v[i+1].y-v[i].y))+3*D*D*(v[i].y-v[i-1].y))/(D*F),z:(3*(F*F*(v[i+1].z-v[i].z))+3*D*D*(v[i].z-v[i-1].z))/(D*F)}}for(i=1;i<n;i++){var C=H[i-1][1]/H[i][0];H[i]=[0,H[i][1]*C-H[i-1][2],H[i][2]*C];G[i].x=G[i].x*C-G[i-1].x;G[i].y=G[i].y*C-G[i-1].y;G[i].z=G[i].z*C-G[i-1].z;H[i][2]/=H[i][1];G[i].x/=H[i][1];G[i].y/=H[i][1];G[i].z/=H[i][1];H[i][1]=1}E[n-1]={x:G[n-1].x,y:G[n-1].y,z:G[n-1].z};for(j=n-1;j>0;j--){E[j-1]={x:G[j-1].x-H[j-1][2]*E[j].x,y:G[j-1].y-H[j-1][2]*E[j].y,z:G[j-1].z-H[j-1][2]*E[j].z}}var x=[];count=0;for(i=0;i<n-1;i++){var F=w[i];var B=v[i].x;var A=E[i].x;var z=(v[i+1].x-v[i].x)*3/(F*F)-(E[i+1].x+2*E[i].x)/F;var y=(v[i+1].x-v[i].x)*(-2/(F*F*F))+(E[i+1].x+E[i].x)*(1/(F*F));var k=v[i].y;var h=E[i].y;var g=(v[i+1].y-v[i].y)*3/(F*F)-(E[i+1].y+2*E[i].y)/F;var f=(v[i+1].y-v[i].y)*(-2/(F*F*F))+(E[i+1].y+E[i].y)*(1/(F*F));var u=v[i].z;var s=E[i].z;var q=(v[i+1].z-v[i].z)*3/(F*F)-(E[i+1].z+2*E[i].z)/F;var o=(v[i+1].z-v[i].z)*(-2/(F*F*F))+(E[i+1].z+E[i].z)*(1/(F*F));var r=0;for(j=0;j<m;j++){x[count]={x:((y*r+z)*r+A)*r+B,y:((f*r+g)*r+h)*r+k,z:((o*r+q)*r+s)*r+u};count++;r+=F/m}}x[count]={x:v[n-1].x,y:v[n-1].y,z:v[n-1].z};return x}function SplineCurve(q,m){var n=q.length;var r=[];var D=[];var C=[];var A=[];for(i=0;i<n-1;i++){var e=q[i];var c=q[i+1];r[i]=Math.sqrt((e.x-c.x)*(e.x-c.x)+(e.y-c.y)*(e.y-c.y))}D[0]=[0,1,0.5];C[0]={x:(3/(2*r[0]))*(q[1].x-q[0].x),y:(3/(2*r[0]))*(q[1].y-q[0].y)};D[n-1]=[1,2,0];C[n-1]={x:(3/r[n-2])*(q[n-1].x-q[n-2].x),y:(3/r[n-2])*(q[n-1].y-q[n-2].y)};for(i=1;i<n-1;i++){var B=r[i-1];var z=r[i];D[i]=[z,2*(z+B),B];C[i]={x:(3*(B*B*(q[i+1].x-q[i].x))+3*z*z*(q[i].x-q[i-1].x))/(z*B),y:(3*(B*B*(q[i+1].y-q[i].y))+3*z*z*(q[i].y-q[i-1].y))/(z*B)}}for(i=1;i<n;i++){var y=D[i-1][1]/D[i][0];D[i]=[0,D[i][1]*y-D[i-1][2],D[i][2]*y];C[i].x=C[i].x*y-C[i-1].x;C[i].y=C[i].y*y-C[i-1].y;D[i][2]/=D[i][1];C[i].x/=D[i][1];C[i].y/=D[i][1];D[i][1]=1}A[n-1]={x:C[n-1].x,y:C[n-1].y};for(j=n-1;j>0;j--){A[j-1]={x:C[j-1].x-D[j-1][2]*A[j].x,y:C[j-1].y-D[j-1][2]*A[j].y}}var s=[];count=0;for(i=0;i<n-1;i++){var B=r[i];var x=q[i].x;var w=A[i].x;var v=(q[i+1].x-q[i].x)*3/(B*B)-(A[i+1].x+2*A[i].x)/B;var u=(q[i+1].x-q[i].x)*(-2/(B*B*B))+(A[i+1].x+A[i].x)*(1/(B*B));var k=q[i].y;var h=A[i].y;var g=(q[i+1].y-q[i].y)*3/(B*B)-(A[i+1].y+2*A[i].y)/B;var f=(q[i+1].y-q[i].y)*(-2/(B*B*B))+(A[i+1].y+A[i].y)*(1/(B*B));var o=0;for(j=0;j<m;j++){s[count]={x:((u*o+v)*o+w)*o+x,y:((f*o+g)*o+h)*o+k};count++;o+=B/m}}s[count]={x:q[n-1].x,y:q[n-1].y};return s}var NullDesignCamera=(function(){var c=new THREE.Vector3();var a=0;function b(e,d){this.camera;this.domElement;this.rotation;this.distance;this.speed;this.focus;this.center;this.isClick;this.pMouse;this.enabled=true;this.target;this.autoRotate=true;this.autoRotateSpeed=0.025;this.enableDamping=true;this.dampingFactor=0.5;this.enableZoom=false;this.minDistance=10;this.maxDistance=500;this.minPolarAngle=Math.PI*0.15;this.maxPolarAngle=Math.PI*0.5;this.init(e,d)}b.prototype={init:function(f,e){this.camera=f;this.domElement=e;this.rotation=new THREE.Vector3();this.rotation.x=(this.maxPolarAngle+this.maxPolarAngle+this.minPolarAngle)/3;this.rotation.y=0;this.distance=25;this.speed=0.01;this.focus=this.camera.focus;this.target=this.camera.focus;this.center=this.camera.focus;this.isClick=false;this.pMouse={x:0,y:0};c.x=this.rotation.x;c.y=this.rotation.y;a=this.distance;var d=this;this.domElement.addEventListener("contextmenu",function(g){g.preventDefault()});this.domElement.addEventListener("mousedown",function(g){d.onMouseDown(g)},false);this.domElement.addEventListener("mouseup",function(g){d.onMouseUp(g)},false);this.domElement.addEventListener("mousemove",function(g){d.onMouseMove(g)},false);this.domElement.addEventListener("mousewheel",function(g){d.onMouseWheel(g)},false);this.domElement.addEventListener("DOMMouseScroll",function(g){d.onMouseWheel(g)},false);window.addEventListener("mouseup",function(g){d.onMouseUp(g)},false);this.update()},update:function(){if(this.autoRotate){c.y+=this.autoRotateSpeed/60}this.distance+=(a-this.distance)*0.16;this.rotation.x+=(c.x-this.rotation.x)*0.16;this.rotation.y+=(c.y-this.rotation.y)*0.16;var e=new THREE.Spherical();var h=this.rotation.x;var g=this.rotation.y-90;var f=new THREE.Object3D();e.set(this.distance,h,g);f.position.setFromSpherical(e);var d=f.position.x+this.target.x;var l=f.position.y+this.target.y;var k=f.position.z+this.target.z;this.camera.position.set(d,l,k);this.camera.lookAt(this.focus)},onMouseDown:function(d){this.pMouse.x=d.pageX;this.pMouse.y=d.pageY;this.isClick=true},onMouseUp:function(d){this.isClick=false},onMouseMove:function(k){if(!this.isClick){return}var f=k.pageX;var d=k.pageY;var h=this.pMouse.x-f;var g=this.pMouse.y-d;c.y+=h*this.speed;c.x+=g*this.speed;if(c.x<this.minPolarAngle){c.x=this.minPolarAngle}else{if(c.x>this.maxPolarAngle){c.x=this.maxPolarAngle}}this.pMouse.x=f;this.pMouse.y=d},onMouseWheel:function(d){d.preventDefault();d.stopPropagation();var f=0;if(d.wheelDelta!==undefined){f=d.wheelDelta}else{if(d.detail!==undefined){f=-d.detail}}if(f>0){a++;a=a>this.maxDistance?this.maxDistance:a}else{if(f<0){a--;a=a<this.minDistance?this.minDistance:a}}}};return b})();var Sky=(function(){function a(b){this.mesh;this.init(b)}a.prototype={init:function(d){var e=new THREE.BoxBufferGeometry(1,1,1);var f=["const int NUM_DATA = 6;","uniform vec3 colors[NUM_DATA];","uniform float intervals[NUM_DATA];","varying vec3 vPosition;","varying vec3 vColors[NUM_DATA];","varying float vIntervals[NUM_DATA];","void main()	{","	vPosition = position;","	for( int i = 0; i < NUM_DATA; i++ )","	{","		vColors[i] = colors[i];","		vIntervals[i] = intervals[i];","	}","	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n");var b=["const int NUM_DATA = 6;","uniform float time;","uniform vec3 light;","varying vec3 vPosition;","varying vec3 vColors[NUM_DATA];","varying float vIntervals[NUM_DATA];","vec3 mod289(vec3 x) {	return x - floor(x * (1.0 / 289.0)) * 289.0;	}","vec4 mod289(vec4 x) {	return x - floor(x * (1.0 / 289.0)) * 289.0;	}","vec4 permute(vec4 x) {	return mod289(((x*34.0)+1.0)*x);	}","vec4 taylorInvSqrt(vec4 r) {	return 1.79284291400159 - 0.85373472095314 * r;	}","float snoise(vec3 v) {","	const vec2  C = vec2(1.0/6.0, 1.0/3.0) ;","	const vec4  D = vec4(0.0, 0.5, 1.0, 2.0);","	// First corner","	vec3 i  = floor(v + dot(v, C.yyy) );","	vec3 x0 =   v - i + dot(i, C.xxx) ;","	// Other corners","	vec3 g = step(x0.yzx, x0.xyz);","	vec3 l = 1.0 - g;","	vec3 i1 = min( g.xyz, l.zxy );","	vec3 i2 = max( g.xyz, l.zxy );","	vec3 x1 = x0 - i1 + C.xxx;","	vec3 x2 = x0 - i2 + C.yyy;","	vec3 x3 = x0 - D.yyy;","	// Permutations","	i = mod289(i);","	vec4 p = permute( permute( permute(","	i.z + vec4(0.0, i1.z, i2.z, 1.0 ))","	+ i.y + vec4(0.0, i1.y, i2.y, 1.0 ))","	+ i.x + vec4(0.0, i1.x, i2.x, 1.0 ));","	float n_ = 0.142857142857; // 1.0/7.0","	vec3  ns = n_ * D.wyz - D.xzx;","	vec4 j = p - 49.0 * floor(p * ns.z * ns.z);  //  mod(p,7*7)","	vec4 x_ = floor(j * ns.z);","	vec4 y_ = floor(j - 7.0 * x_ );    // mod(j,N)","	vec4 x = x_ *ns.x + ns.yyyy;","	vec4 y = y_ *ns.x + ns.yyyy;","	vec4 h = 1.0 - abs(x) - abs(y);","	vec4 b0 = vec4( x.xy, y.xy );","	vec4 b1 = vec4( x.zw, y.zw );","	// vec4 s0 = vec4(lessThan(b0,0.0))*2.0 - 1.0;","	// vec4 s1 = vec4(lessThan(b1,0.0))*2.0 - 1.0;","	vec4 s0 = floor(b0)*2.0 + 1.0;","	vec4 s1 = floor(b1)*2.0 + 1.0;","	vec4 sh = -step(h, vec4(0.0));","	vec4 a0 = b0.xzyw + s0.xzyw*sh.xxyy ;","	vec4 a1 = b1.xzyw + s1.xzyw*sh.zzww ;","	vec3 p0 = vec3(a0.xy,h.x);","	vec3 p1 = vec3(a0.zw,h.y);","	vec3 p2 = vec3(a1.xy,h.z);","	vec3 p3 = vec3(a1.zw,h.w);","	// Normalise gradients","	vec4 norm = taylorInvSqrt(vec4(dot(p0,p0), dot(p1,p1), dot(p2, p2), dot(p3,p3)));","	p0 *= norm.x;","	p1 *= norm.y;","	p2 *= norm.z;","	p3 *= norm.w;","	// Mix final noise value","	vec4 m = max(0.6 - vec4(dot(x0,x0), dot(x1,x1), dot(x2,x2), dot(x3,x3)), 0.0);","	m = m * m;","	return 42.0 * dot(m*m, vec4( dot(p0,x0), dot(p1,x1), dot(p2,x2), dot(p3,x3) ) );","}","void main()	{","	vec3 pos = normalize( vPosition );","	pos = ( pos + 1.0 ) * 0.5;","	float _p = pos.y;","	float i0 = vIntervals[0];","	float i1 = vIntervals[1];","	float i2 = vIntervals[2];","	float i3 = vIntervals[3];","	float i4 = vIntervals[4];","	float i5 = vIntervals[5];","	vec4 _c0 = vec4( vColors[0] / 255.0, 1.0 );","	vec4 _c1 = vec4( vColors[1] / 255.0, 1.0 );","	vec4 _c2 = vec4( vColors[2] / 255.0, 1.0 );","	vec4 _c3 = vec4( vColors[3] / 255.0, 1.0 );","	vec4 _c4 = vec4( vColors[4] / 255.0, 1.0 );","	vec4 _c5 = vec4( vColors[5] / 255.0, 1.0 );","	if( _p < i1 ){","		_c0 *= 1.0 - ( clamp( _p, i0, i1 ) - i0 ) / i1;","		_c1 *= ( clamp( _p, i0, i1 ) - i0 ) / i1;","		_c2 *= 0.0;","		_c3 *= 0.0;","		_c4 *= 0.0;","		_c5 *= 0.0;","	} else if( _p < i2 && _p > i1 ){","		_c0 *= 0.0;","		_c1 *= 1.0 - ( clamp( _p, i1, i2 ) - i1 ) / ( i2 - i1);","		_c2 *= ( clamp( _p, i1, i2 ) - i1 ) / ( i2 - i1);","		_c3 *= 0.0;","		_c4 *= 0.0;","		_c5 *= 0.0;","	} else if( _p < i3 && _p > i2 ){","		_c0 *= 0.0;","		_c1 *= 0.0;","		_c2 *= 1.0 - ( clamp( _p, i2, i3 ) - i2 ) / ( i3 - i2 );","		_c3 *= ( clamp( _p, i2, i3 ) - i2 ) / ( i3 - i2 );","		_c4 *= 0.0;","		_c5 *= 0.0;","	} else if( _p < i4 && _p > i3 ){","		_c0 *= 0.0;","		_c1 *= 0.0;","		_c2 *= 0.0;","		_c3 *= 1.0 - ( clamp( _p, i3, i4 ) - i3 ) / ( i4 - i3 );","		_c4 *= ( clamp( _p, i3, i4 ) - i3 ) / ( i4 - i3 );","		_c5 *= 0.0;","	} else {","		_c0 *= 0.0;","		_c1 *= 0.0;","		_c2 *= 0.0;","		_c3 *= 0.0;","		_c4 *= 1.0 - ( clamp( _p, i4, i5 ) - i4 ) / ( i5 - i4 );","		_c5 *= ( clamp( _p, i4, i5 ) - i4 ) / ( i5 - i4 );","	}","	vec4 color = _c0 + _c1 + _c2 + _c3 + _c4 + _c5;","	float _d = distance( normalize( light ), normalize( vPosition ) )*100.0;","	color += vec4( 1.0,1.0,1.0,0.1) * 3.0/_d;","	gl_FragColor = color;","}"].join("\n");var c=new THREE.ShaderMaterial({uniforms:{time:{value:0},light:{value:d},colors:{type:"v4v",value:[new THREE.Color(0,0,0),new THREE.Color(51,51,51),new THREE.Color(255,255,255),new THREE.Color(255,255,255),new THREE.Color(92,169,199),new THREE.Color(86,183,226)]},intervals:{value:[0,0.48,0.49,0.5,0.65,1]}},vertexShader:f,fragmentShader:b,transparent:true,side:THREE.BackSide});this.mesh=new THREE.Mesh(e,c)}};return a})();