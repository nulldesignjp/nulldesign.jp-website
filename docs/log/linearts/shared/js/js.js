/*	js.js*/$(function(){	(function($,ND){		var _isEnableLocalStorage = false;				//		var _ui = document.createElement( 'DIV' );		$( _ui ).attr( 'id', 'managemantUI' );		$( '#documentBody' ).append( _ui );						var _add = document.createElement( 'BUTTON' );		$( _add ).attr( 'id', 'addButton' );		$( _add ).text( 'Add Project or Task' );		$( _add ).click(function(){			_createAddButton();		});				$( _ui ).append( _add );						//	UNDO		var _undo = document.createElement( 'BUTTON' );		$( _undo ).attr( 'id', 'undoButton' );		$( _undo ).text( 'UNDO' );		$( _undo ).click(function(){		});		$( _ui ).append( _undo );				//	REDO		var _redo = document.createElement( 'BUTTON' );		$( _redo ).attr( 'id', 'redoButton' );		$( _redo ).text( 'REDO' );		$( _redo ).click(function(){		});		$( _ui ).append( _redo );				//	clear		var _clear = document.createElement( 'BUTTON' );		$( _clear ).attr( 'id', 'clearButton' );		$( _clear ).text( 'CLEAR' );		$( _clear ).click(function(){			$( 'tr.taskLine' ).css( 'display', 'none' );			clearStorage();		});		$( _ui ).append( _clear );				//	SAVE		var _save = document.createElement( 'BUTTON' );		$( _save ).attr( 'id', 'saveButton' );		$( _save ).text( 'SAVE' );		$( _save ).click(function(){			_saveStorage();		});		$( _ui ).append( _save );				//	CREATE TABLE		var _table = document.createElement( 'TABLE' );		$( _table ).attr( 'id', 'main' );		$( '#documentBody' ).append( _table );				var _tHead =			'<tr class="tHeadBlock">' + 			'<td class="w00"> - </td>' + 			'<td class="w01"> ProjectName </td>' + 			'<td class="w02"> output </td>' + 			'<td class="w03"> time </td>' + 			'<td class="w04"> - </td>' + 			'<td class="w05"> mon </td>' + 			'<td class="w06"> tue </td>' + 			'<td class="w07"> wed </td>' + 			'<td class="w08"> thu </td>' + 			'<td class="w09"> fry </td>';		$( _table ).append( _tHead );				var _tFoot =			'<tr class="tFootBlock">' + 			'<td> - </td>' + 			'<td> - </td>' + 			'<td> - </td>' + 			'<td id="t00"> 0 </td>' + 			'<td> - </td>' + 			'<td id="t01"> 0 </td>' + 			'<td id="t02"> 0 </td>' + 			'<td id="t03"> 0 </td>' + 			'<td id="t04"> 0 </td>' + 			'<td id="t05"> 0 </td>';		$( _table ).append( _tFoot );				function _createAddButton()		{						var _tr = document.createElement( 'TR' );			var _td00 = document.createElement( 'TD' );			var _td01 = document.createElement( 'TD' );			var _td02 = document.createElement( 'TD' );			var _td03 = document.createElement( 'TD' );			var _td04 = document.createElement( 'TD' );			var _td05 = document.createElement( 'TD' );			var _td06 = document.createElement( 'TD' );			var _td07 = document.createElement( 'TD' );			var _td08 = document.createElement( 'TD' );			var _td09 = document.createElement( 'TD' );						$( _tr ).addClass( 'taskLine' );						$( _tr ).append( _td00 );			$( _tr ).append( _td01 );			$( _tr ).append( _td02 );			$( _tr ).append( _td03 );			$( _tr ).append( _td04 );			$( _tr ).append( _td05 );			$( _tr ).append( _td06 );			$( _tr ).append( _td07 );			$( _tr ).append( _td08 );			$( _tr ).append( _td09 );						$( 'tr.tFootBlock' ).before( _tr );						//	TD00			var _remove = document.createElement( 'BUTTON' );			$( _remove ).attr( 'class', 'removeButton' );			$( _remove ).text( 'REMOVE' );			$( _remove ).click(function(){				var _tr = $( this ).parent().parent();				$( _tr ).css( 'display','none' );				//console.log( $( 'tr' ).length );			});			$( _td00 ).append( _remove );						var _id = $( 'tr.taskLine' ).length;			$( _tr ).attr('id', 'task_'+_id );			$( _td01 ).html('<input type="text" name="pname'+_id+'" id="pname'+_id+'" class="l"></input>');			$( _td02 ).html('<input type="text" name="output'+_id+'" id="output'+_id+'" class="l"></input>');			$( _td03 ).html('<input type="text" name="time'+_id+'" id="time'+_id+'" class="c t00"></input>');			$( _td04 ).html('-');			$( _td05 ).html('<input type="text" name="w1'+_id+'" id="w1'+_id+'" class="c t01"></input>');			$( _td06 ).html('<input type="text" name="w2'+_id+'" id="w2'+_id+'" class="c t02"></input>');			$( _td07 ).html('<input type="text" name="w3'+_id+'" id="w3'+_id+'" class="c t03"></input>');			$( _td08 ).html('<input type="text" name="w4'+_id+'" id="w4'+_id+'" class="c t04"></input>');			$( _td09 ).html('<input type="text" name="w5'+_id+'" id="w5'+_id+'" class="c t05"></input>');						$( [ _td03, _td05, _td06, _td07, _td08, _td09 ] ).find( 'input' ).each(function( i, e ){				$( this ).blur(function(){					sigmaTotal( 't0'+i );				}).change(function(){					sigmaTotal( 't0'+i );				});			});		}		/*				*/		if( window.localStorage )		{			//document.getElementById("result").innerHTML = "ローカルストレージは使えます";			_isEnableLocalStorage = true;		}				if( _isEnableLocalStorage )		{			init();		}						function saveStorage( _kay, _value )		{			window.localStorage.setItem( _kay, _value );		}		function loadStorage( _kay )		{			return window.localStorage.getItem( _kay );		}		function removeStorage( _kay )		{			window.localStorage.removeItem( _kay );		}		function clearStorage()		{			window.localStorage.clear();		}						function init()		{			//	load			if( window.localStorage.getItem( 'length' ) )			{				var len = loadStorage('length');								for( var i = 0; i < len; i++ )				{					_createAddButton();				}								$( 'tr.taskLine' ).each(function(i,e){									var _id = $( this ).attr( 'id' );					var _value = loadStorage( _id );										$( this ).css('display', _value );										$( this ).find( 'input' ).each(function(){												var _id2 = $( this ).attr( 'id' );						var _value2 = loadStorage( _id2 );						$( '#' + _id2 ).val( _value2 );					});									})			}						sigmaTotal( 't00' );			sigmaTotal( 't01' );			sigmaTotal( 't02' );			sigmaTotal( 't03' );			sigmaTotal( 't04' );			sigmaTotal( 't05' );		}				function _saveStorage()		{			saveStorage( 'length', $( 'tr.taskLine' ).length );						$( 'tr.taskLine' ).each(function(i,e){				saveStorage( $( this ).attr( 'id' ), $( this ).css('display') );				$(this).find( 'input' ).each(function(){					var _id = $( this ).attr( 'id' );					var _value = $( this ).val();					saveStorage( _id, _value );				});			})		}				//	sigma result.		function sigmaTotal( e )		{			var _result = 0;			$( 'input.' + e ).each(function( i, e ){							var _tr = $( this ).parent().parent();				if( $( _tr ).css( 'display' ) != 'none' )				{					var _val = ( $( this ).val() == '' )?0 : $( this ).val()					_result += Number( _val );				}			});						var _maxTime = 8;			if( e == 't00' )			{				_maxTime = 40;			}			if( _result > _maxTime )			{				$( '#' + e ).addClass('attention');			} else {				$( '#' + e ).removeClass('attention');			}						$( '#' + e ).text( _result );		}					})(jQuery,{});});