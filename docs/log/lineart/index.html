<!DOCTYPE HTML>
<!--[if IE 6]><html lang="ja" class="ie6"><![endif]-->
<!--[if IE 7]><html lang="ja" class="ie7"><![endif]-->
<!--[if IE 8]><html lang="ja" class="ie8"><![endif]-->
<!--[if gte IE 9]><!--><html lang="ja"><!--<![endif]-->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta http-equiv="Content-Language" content="ja">
<meta http-equiv="Content-Style-Type" content="text/css">
<meta http-equiv="Content-Script-Type" content="text/javascript">
<meta http-equiv="imagetoolbar" content="no">
<meta http-equiv="cleartype" content="on">
<meta name="format-detection" content="telephone=no">
<meta name="viewport" content="initial-scale=1.0,minimum-scale=1.0,maximum-scale=1.0,user-scalable=yes">
<meta name="keywords" content="">
<meta name="description" content="">
<meta property="og:title" content="">
<meta property="og:site_name" content="">
<meta property="og:type" content="website">
<meta property="og:image" content="">
<meta property="og:url" content="">
<meta property="og:description" content="">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black">
<link rel="apple-touch-icon" sizes="57x57" href="homeIco57.png">
<link rel="apple-touch-icon" sizes="114x114" href="homeshared/img/114.png">
<link rel="apple-touch-startup-image" href="home3.png" media="screen and (max-device-width : 320px)"><!-- iPhone 3GS, 2011 iPod Touch -->
<link rel="apple-touch-startup-image" href="home4.png" media="(max-device-width : 480px) and (-webkit-min-device-pixel-ratio : 2)"><!-- iPhone 4, 4S and 2011 iPod Touch -->
<link rel="apple-touch-startup-image" href="home5.png" media="(max-device-width : 548px) and (-webkit-min-device-pixel-ratio : 2)"><!-- iPhone 5 and 2012 iPod Touch -->
<link rel="apple-touch-startup-image" sizes="1024x748" href="shared/img/homeIpadLand.png" media="screen and (min-device-width : 481px) and (max-device-width : 1024px) and (orientation : landscape)"><!-- iPad landscape -->
<link rel="apple-touch-startup-image" sizes="768x1004" href="shared/img/homeIpadPort.png" media="screen and (min-device-width : 481px) and (max-device-width : 1024px) and (orientation : portrait)"><!-- iPad Portrait -->
<!--[if lt IE 9]><script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
<!--[if lt IE 9]><script src="http://ie7-js.googlecode.com/svn/version/2.1(beta4)/IE9.js" type="text/javascript"></script><![endif]-->
<!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]-->
<style>
html,
body{
	height: 100%;
	overflow: hidden;
}
body{
	margin: 0;
	padding: 0;
	background-color: #F0F0F0;
	color: #333;
}
#container{
	height: 100%;
}
canvas{
	display: block;
}

</style>
<title>untitled</title>
</head>
<body>
<div id="container">
<!--/ container --></div>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/2.0.2/jquery.min.js"></script>
<script>
(function($){
	var _canvas,_ctx,_ua;
	var _pList = [];

	var _amount = 3;
	var _isLoopLine = true;

	var _car = {};
	var _runCount = 0;
	var _intervalKey;
	var _speed = 1;

	//	v157-7-152-126.z1d1.static.cnode.jp
	//	ドメイン　コレード値	種別
	//	A,MX,CNAME,TXT


	_ua = getUA();

	if( _ua.msie8 || _ua.msie7 || _ua.msie6 )
	{
		var _p = document.createElement('p');
		_p.style.fontSize = '64px';
		_p.style.color = '#999999';
		_p.style.margin = 0;
		_p.style.padding = '32px';
		_p.innerHTML = 'ただ今お使いいただいているブラウザでは、このサイトはカッコ良すぎて映し出す事が出来ません。';
		document.body.appendChild( _p );
	}

	_canvas = document.createElement( 'canvas' );
	_ctx = _canvas.getContext( '2d' );
	document.getElementById('container').appendChild( _canvas );
	_canvas.width = $( window ).width();
	_canvas.height = $( window ).height();


	//
	init();
	createField();
	clearCanvas();
	drawPlabeLine();
	halfPoints();
	quadraticCurveTo();
	bezierCurveTo();

	start();

	function init()
	{
		_pList = [];

		_car = {};

		var _w = $(window).width();
		var _h = $(window).height();
		_ctx.clearRect( _w, _h );
	}
	function createField()
	{
		_pList = [];

		var _w = _canvas.width;
		var _h = _canvas.height;
		var _prev = null;
		var _next = null;

		for( var i = 0; i < _amount; i++ )
		{
			var _p = {x:0,y:0,prev:null,next:null};
			_p.x = Math.floor( Math.random() * _w );
			_p.y = Math.floor( Math.random() * _h );
			_pList[i] = _p;

			if( _prev != null )
			{
				_prev.next = _p;
				_p.prev = _prev;
			}
			
			_prev = _p;
		}

		//	loop
		if( _isLoopLine )
		{
			_pList[0].prev = _pList[_amount-1];
			_pList[_amount-1].next = _pList[0];
		}

		_car.x = _pList[0].x;
		_car.y = _pList[0].y;
	}
	function clearCanvas()
	{
		var _w = _canvas.width;
		var _h = _canvas.height;

		_ctx.clearRect( 0, 0, _w, _h );
	}
	function drawPlabeLine()
	{
		_ctx.beginPath();
		_ctx.strokeStyle = 'rgba(51,51,51,0.3);';
		_ctx.lineWidth = 1;

		var len = _pList.length;
		var _r = 3;

		for( var i = 0; i < len; i++ )
		{
			var _p = _pList[i];
			_ctx.moveTo( _p.x + _r, _p.y );
			_ctx.arc( _p.x, _p.y, _r, 0, Math.PI * 2 );
			if( _p.prev != null )
			{
				_ctx.moveTo( _p.x, _p.y );
				_ctx.lineTo( _p.prev.x, _p.prev.y );	
			}
		}
		_ctx.stroke();
	}

	function halfPoints()
	{
		_ctx.beginPath();
		_ctx.strokeStyle = 'rgba(153,0,0,0.5);';
		_ctx.lineWidth = 6;

		var len = _pList.length;
		var _r = 1;

		for( var i = 0; i < len; i++ )
		{
			var _p = _pList[i];
			if( _p.prev != null )
			{
				var _halfX = ( _p.x + _p.prev.x ) * .5;
				var _halfY = ( _p.y + _p.prev.y ) * .5;
				_ctx.moveTo( _halfX + _r, _halfY );
				_ctx.arc( _halfX, _halfY, _r, 0, Math.PI * 2 );
			}
		}
		_ctx.stroke();
	}
	
	function quadraticCurveTo()
	{
		_ctx.beginPath();
		_ctx.strokeStyle = 'rgba(0,0,153,1);';
		_ctx.lineWidth = 1;

		var len = _pList.length;
		var _p = _pList[0];
		var _next = _p.next;
		var _halfX = ( _p.x + _next.x ) * .5;
		var _halfY = ( _p.y + _next.y ) * .5;

		_ctx.moveTo( _halfX, _halfY );

		for( var i = 0; i < len; i++ )
		{
			_p = _pList[i];
			_next = _p.next;
			_halfX = ( _p.x + _next.x ) * .5;
			_halfY = ( _p.y + _next.y ) * .5;
			_ctx.quadraticCurveTo( _p.x, _p.y, _halfX, _halfY );
		}
			//	last
			_p = _p.next;
			_next = _p.next;
			_halfX = ( _p.x + _next.x ) * .5;
			_halfY = ( _p.y + _next.y ) * .5;
			_ctx.quadraticCurveTo( _p.x, _p.y, _halfX, _halfY );

		_ctx.stroke();
	}
	function fillQuadraticCurveTo()
	{
		_ctx.beginPath();
		_ctx.strokeStyle = 'rgba(0,153,0,1);';
		_ctx.lineWidth = 1;

		var len = _pList.length;
		var _p = _pList[0];
		var _next = _p.next;
		var _prev = _p.prev;
		var _halfX = ( _p.x + _next.x ) * .5;
		var _halfY = ( _p.y + _next.y ) * .5;
		var _prevX = ( _p.x + _prev.x ) * .5;
		var _prevY = ( _p.y + _prev.y ) * .5;
		var _tarX;
		var _tarY;

		_ctx.moveTo( _halfX, _halfY );

		for( var i = 0; i < len; i++ )
		{
			_p = _pList[i];
			_next = _p.next;
			_prev = _p.prev;
			_prevX = _halfX;
			_prevY = _halfY;
			_halfX = ( _p.x + _next.x ) * .5;
			_halfY = ( _p.y + _next.y ) * .5;
			_tarX = _p.x * 2 - ( _prevX + _halfX ) * .5;
			_tarY = _p.y * 2 - ( _prevY + _halfY ) * .5;
			_ctx.quadraticCurveTo( _tarX, _tarY, _halfX, _halfY );
		}
			//	last
			_p = _p.next;
			_next = _p.next;
			_prev = _p.prev;
			_prevX = _halfX;
			_prevY = _halfY;
			_halfX = ( _p.x + _next.x ) * .5;
			_halfY = ( _p.y + _next.y ) * .5;
			_tarX = _p.x * 2 - ( _prevX + _halfX ) * .5;
			_tarY = _p.y * 2 - ( _prevY + _halfY ) * .5;
			_ctx.quadraticCurveTo( _tarX, _tarY, _halfX, _halfY );

		_ctx.stroke();

		/*
package
{
	import flash.display.Sprite;
	import flash.events.MouseEvent;
	
	public class CurveThroughPoint extends Sprite
	{
		private var x0:Number = 100;
		private var y0:Number = 200;
		private var x1:Number;
		private var y1:Number;
		private var x2:Number = 300;
		private var y2:Number = 200;

		public function CurveThroughPoint()
		{
			init();
		}
		
		private function init():void
		{
			stage.addEventListener(MouseEvent.MOUSE_MOVE, onMouseMove);
		}
		
		private function onMouseMove(event:MouseEvent):void
		{
			x1 = mouseX * 2 - (x0 + x2) / 2;
			y1 = mouseY * 2 - (y0 + y2) / 2;
			graphics.clear();
			graphics.lineStyle(1);
			graphics.moveTo(x0, y0);
			graphics.curveTo(x1, y1, x2, y2);
		}
	}
}


		*/
	}
	
	function bezierCurveTo()
	{
		_ctx.beginPath();
		_ctx.strokeStyle = 'rgba(153,0,0,1);';
		_ctx.lineWidth = 1;

		var len = _pList.length;
		var _p = _pList[0];
		var _next = _p.next;
		var _halfX = ( _p.x + _next.x ) * .5;
		var _halfY = ( _p.y + _next.y ) * .5;

		_ctx.moveTo( _halfX, _halfY );

		for( var i = 0; i < len; i++ )
		{
			_p = _pList[i];
			_next = _p.next;
			_halfX = ( _p.x + _next.x ) * .5;
			_halfY = ( _p.y + _next.y ) * .5;
			_ctx.bezierCurveTo( _p.x, _p.y, _p.x, _p.y, _halfX, _halfY );
		}

		//	last
		_p = _p.next
		_next = _p.next;
		_halfX = ( _p.x + _next.x ) * .5;
		_halfY = ( _p.y + _next.y ) * .5;
		_ctx.bezierCurveTo( _p.x, _p.y, _p.x, _p.y, _halfX, _halfY );

		_ctx.stroke();
	}

	//	quadraticCurveTo()
	//	http://www.html5.jp/canvas/ref/method/quadraticCurveTo.html

	//	bezierCurveTo()
	//	http://www.html5.jp/canvas/ref/method/bezierCurveTo.html

	function start()
	{
		_intervalKey = setInterval( _loop, 1000 / 60 );
	}
	function stop()
	{
		clearInterval( _intervalKey );
	}
	function _loop()
	{

		clearCanvas();

		drawPlabeLine();
		halfPoints();
		quadraticCurveTo();
		fillQuadraticCurveTo();
		bezierCurveTo();

		var len = _pList.length;
		var _div = 100;

		_runCount += _speed;
		_runCount %= len * _div;
		var _runSection = Math.floor( _runCount / _div );
		var _runPosition = _runCount % _div;

		var _p0 = _pList[_runSection];
		var _p1 = _p0.next;
		var _p2 = _p1.next;
		var _p3 = _p2.next;

		//	car1
		var _par = _runPosition / _div;

		var _halfX0 = ( _p0.x + _p1.x ) * .5;
		var _halfY0 = ( _p0.y + _p1.y ) * .5;
		var _x0 = _halfX0 + ( _p1.x - _halfX0 ) * _par;
		var _y0 = _halfY0 + ( _p1.y - _halfY0 ) * _par;

		var _halfX1 = ( _p1.x + _p2.x ) * .5;
		var _halfY1 = ( _p1.y + _p2.y ) * .5;
		var _x1 = _p1.x + ( _halfX1 - _p1.x ) * _par;
		var _y1 = _p1.y + ( _halfY1 - _p1.y ) * _par;

		var _x = _x0 * ( 1 - _par ) + _x1 * _par;
		var _y = _y0 * ( 1 - _par ) + _y1 * _par;

		//
		var _p0 = {x:0,y:0};
		var _p1 = _pList[_runSection].next;
		var _p2 = _pList[_runSection].next;
		var _p3 = {x:0,y:0};

		_p0.x = ( _pList[_runSection].x + _p1.x ) * 0.5;
		_p0.y = ( _pList[_runSection].y + _p1.y ) * 0.5;
		_p3.x = ( _p1.x + _p1.next.x ) * 0.5;
		_p3.y = ( _p1.y + _p1.next.y ) * 0.5;


		var _p4x = _p0.x + ( _p1.x - _p0.x ) * _par;
		var _p4y = _p0.y + ( _p1.y - _p0.y ) * _par;
		var _p5x = _p1.x + ( _p2.x - _p1.x ) * _par;
		var _p5y = _p1.y + ( _p2.y - _p1.y ) * _par;
		var _p6x = _p2.x + ( _p3.x - _p2.x ) * _par;
		var _p6y = _p2.y + ( _p3.y - _p2.y ) * _par;

		var _p7x = _p4x + ( _p5x - _p4x ) * _par;
		var _p7y = _p4y + ( _p5y - _p4y ) * _par;
		var _p8x = _p5x + ( _p6x - _p5x ) * _par;
		var _p8y = _p5y + ( _p6y - _p5y ) * _par;
		var _p9x = _p7x + ( _p8x - _p7x ) * _par;
		var _p9y = _p7y + ( _p8y - _p7y ) * _par;

		var _px = _p9x;
		var _py = _p9y;

		//	car1
		_ctx.beginPath();
		_ctx.fillStyle = 'rgba(0,0,204,0.8);';
		_ctx.moveTo( _x, _y );
		_ctx.arc( _x, _y, 5, 0, Math.PI * 2 );
		_ctx.fill();

		//	car2
		_ctx.beginPath();
		_ctx.fillStyle = 'rgba(204,0,0,0.8);';
		_ctx.moveTo( _px, _py );
		_ctx.arc( _px, _py, 5, 0, Math.PI * 2 );
		_ctx.fill();



	}

})(jQuery);

/*
	getUA.js
*/
function getUA()
{
	var ua =
	{
		'msie'	:	false,
		'msie6'	:	false,
		'msie7'	:	false,
		'msie8'	:	false,
		'msie9'	:	false,
		'msie10'	:	false,
		'iphone'	:	false,
		'ipad'	:	false,
		'ipod'	:	false,
		'safari'	:	false,
		'firefox'	:	false,
		'chrome'	:	false,
		'opera'	:	false,
		'android'	:	false,
		'androidTablet'	:	false,
		'blackberry'	:	false,
		'windowsMobile'	:	false
	};
	var _ua = navigator.userAgent.toLowerCase();
	_ua = _ua.replace(/ /g, "");
	for( var i in ua )
	{
		if( _ua.indexOf( i ) != -1 )
		{
			ua[i] = true;
		}
	}

	//	another ua....
	if( ua.android )
	{
		//	android
		ua.android = ( ( _ua.indexOf( 'android' ) != -1 && _ua.indexOf( 'mobile' ) != -1 ) && _ua.indexOf( 'sc-01c' ) == -1 )?	true:false;

		//	androidTablet:SC-01C
		ua.androidTablet = ( _ua.indexOf( 'android' ) != -1 && ( _ua.indexOf( 'mobile' ) == -1 || _ua.indexOf( 'sc-01c' ) != -1 ) )?	true:false;
	}

	//	windows mobile
	ua.windowsMobile = ( _ua.indexOf( 'IEMobile' ) != -1 )?	true:false;

	//	retina
	ua.isRetina = ( window.devicePixelRatio>1 && ua.iphone )? true:false;

	return ua;
}
</script>
</body>
</html>