<!DOCTYPE html><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta http-equiv="Content-Language" content="ja"><meta http-equiv="Content-Style-Type" content="text/css"><meta http-equiv="Content-Script-Type" content="text/javascript"><meta http-equiv="imagetoolbar" content="no"><meta name="keywords" content=""><meta name="description" content=""><meta name="apple-mobile-web-app-capable" content="yes"><meta name="viewport" content="width=320, initial-scale=1, minimum-scale=1, maximum-scale=1, user-scalable=yes"><script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7/jquery.min.js"></script><title>untitled</title><style type="text/css">body{	margin: 0;	padding: 0;	background-color: #000;}#container{}.gridBox{}.gridBoxInner{	background-image: url(bgGrid.png);	height: 50px;}.lv1 .gridBoxInner{	margin-top: -25px;	height: 75px;}.lv2 .gridBoxInner{	margin-top: -50px;	height: 100px;}.addImage{	margin-top: -50px;}.jump{	margin-top: -15px;		transition: 0.2s;	-webkit-transition-duration: 0.2s;		transition-timing-function: 'ease-in-out';	-webkit-transition-timing-function: 'ease-in-out';}</style></head><body><div id="container"><div id="field"><!--/field--></div><!--/container--></div><script type="text/javascript">$(function(){	(function($,ND){		ND.ua =		{			'msie'	:	false,			'msie6'	:	false,			'msie7'	:	false,			'msie8'	:	false,			'msie9'	:	false,			'iphone'	:	false,			'ipad'	:	false,			'ipod'	:	false,			'safari'	:	false,			'firefox'	:	false,			'chrome'	:	false,			'opera'	:	false,			'android'	:	false,			'blackberry'	:	false		};		var _ua = navigator.userAgent.toLowerCase();		_ua = _ua.replace(/ /g, "");				for( var i in ND.ua )		{			if( _ua.indexOf( i ) != -1 )			{				ND.ua[i] = true;			}		}						var _l = [];		var _t = [];		var _zList = [];		var _f = [			[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],			[0,0,0,1,1,1,1,0,0,0,1,1,1,1,0,0],			[0,0,1,1,0,0,1,1,0,0,1,0,0,1,0,0],			[0,0,1,0,0,0,0,1,1,1,1,0,0,1,0,0],			[0,0,1,0,0,0,0,0,0,0,0,0,0,1,0,0],			[0,0,1,0,0,0,0,0,0,0,0,0,0,1,0,0],			[0,0,1,1,1,1,1,1,1,1,0,0,0,1,0,0],			[0,0,0,0,0,0,0,0,0,1,0,0,0,1,0,0],			[0,0,0,0,0,0,0,0,0,1,0,0,0,1,0,0],			[0,0,0,0,1,1,1,1,1,1,0,0,0,1,1,0],			[0,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0],			[0,0,0,0,1,0,0,0,0,0,0,0,0,1,1,0],			[0,0,0,0,1,1,1,0,0,0,1,1,1,1,0,0],			[0,0,0,0,0,0,1,0,0,0,1,0,0,0,0,0],			[0,0,0,0,0,0,1,1,1,1,1,0,0,0,0,0],			[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]		];				var _w = _f.length;		var _h = _f[0].length;				var _adjX = _w * .5 * 100;		var _adjY = 0;				var _bx;		var _by;		var _px;		var _py;				//	create field2		$( '#field' ).css({				'position':	'relative'		});		$( 'body' ).css({				'overflow':	'hidden'		});		for( var i = 0; i < _w; i++ )		{			_l[i] = [];			_zList[i] = [];			for( var j = 0; j < _h; j++ )			{				_l[i][j] = [ i * 50 - j * 50 + _adjX, j * 25 + i * 25 + _adjY];								var _img = new Image();				_img.src = _f[i][j] == 0? Math.random() < .5?"grid1.png":"grid3.png" : "grid2.png";				$( '#field' ).append( _img );								var _div = document.createElement('div');				var _divInner = document.createElement('div');				_div.className = 'gridBox';				_divInner.className = 'gridBoxInner';				$( '#field' ).append( _div );				$( _div ).append( _divInner );				$( _divInner ).append( _img );								_div.className = 'gridBox';								var _value = Math.floor(Math.random() * 1 )				_zList[i][j] = _value								if( _f[i][j] == 1 ) $( _div ).addClass('lv' + _value );								_t.push( _div );								$( _div ).css({					'position': 'absolute',					'left': _l[i][j][0] + 'px',					'top': _l[i][j][1] + 'px'				});			}		}				var _ball = new Image();		_ball.src = 'kodukai220100126221521140.gif';		$( '#container' ).append( _ball );						_t.push( _ball );				var _hoge = getFirstData();		_bx = _hoge[0];		_by = _hoge[1];		_px = _bx;		_py = _by;				function getFirstData()		{			var _bx = Math.floor( Math.random() * _w );			var _by = Math.floor( Math.random() * _h );			if( _f[_bx][_by] == 1)			{				return [ _bx, _by ];			} else {				return getFirstData();			}		}				$( _ball ).css({			'position': 'fixed',			'left': _l[_bx][_by][0] + 'px',			'top': _l[_bx][_by][1] + 'px'		});				setInterval( _loop, 500 );				function _loop()		{			var _tx = _bx;			var _ty = _by;					if( _f[_tx + 1][_ty] == 1 && _px != _tx+1 )			{				_tx++;			} else if( _f[_tx - 1][_ty] == 1 && _px != _tx-1 )			{				_tx--;			} else if( _f[_tx][_ty + 1] == 1 && _py != _ty+1 )			{				_ty++;			} else if( _f[_tx][_ty-1] == 1 && _py != _ty-1 )			{				_ty--;			}						_tx = _tx<0?0	:	_tx>_w-1?	_w-1	:	_tx;			_ty = _ty<0?0	:	_ty>_h-1?	_h-1	:	_ty;									if( _f[_tx][_ty] == 1 )			{				var _hw = $( window ).width() * .5;				var _hh = $( window ).height() * .5;				_px = _bx;				_py = _by;				_bx = _tx;				_by = _ty;						var _bz = _zList[_bx][_by];								//	player				if( ND.ua.msie )				{					$( _ball ).animate({						'position':'fixed',						'left': _hw +26 + 'px',						'top': _hh - 16+ 'px'					}, 400);					$( '#field' ).animate({						'position':'fixed',						'left': - _l[_bx][_by][0] + _hw + 'px',						'top': - _l[_bx][_by][1] + _hh + _bz * 25 + 'px'					}, 400);										$( _ball ).animate({						'marginTop'	:	'-15px'					},200, function(){						$( _ball ).animate({							'marginTop'	:	0						},200);					});														} else {					$( _ball ).css({						'-moz-transition-duration'	:	'0.4s',						'-webkit-transition-duration' : '0.4s',						'-o-transition-duration'	:	'0.4s',						'-ms-transition-duration'	:	'0.4s',						'position':'fixed',						'left': _hw + 26 + 'px',						'top': _hh - 16+ 'px'					});										$( _ball ).addClass( 'jump' );					setTimeout(function(){						$( _ball ).removeClass( 'jump' );					}, 200 );										$( '#field' ).css({						'-moz-transition-duration'	:	'0.4s',						'-webkit-transition-duration' : '0.4s',						'-o-transition-duration'	:	'0.4s',						'-ms-transition-duration'	:	'0.4s',						'position':'fixed',						'left': - _l[_bx][_by][0] + _hw + 'px',						'top': - _l[_bx][_by][1] + _hh + _bz * 25 + 'px'					});								}																		}									//	Y sort			_t = _t.sort( hikaku );			var len = _t.length;			for( var i = 0; i < len; i++ )			{				//_t[i].style.zIndex = i + 100;			}					}				function hikaku(a, b)		{			var _a = a.style.top;			var _b = b.style.top;						_a = Number( _a.replace( RegExp( /px/g), '' ) );			_b = Number( _b.replace( RegExp( /px/g), '' ) );						return (_b > _a)?-1:1;		}			})(jQuery,{});})</script></body></html>